// This is your Prisma schema file,
// learn more about it in the docs: https://pris.ly/d/prisma-schema

generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = "postgres://704a0589fdcd7ee24772578c2fa75d85f26286e92e628db6c05614ccf85fd8e3:sk_o5h83Du23Gj2Wb5LhD-gz@db.prisma.io:5432/postgres?sslmode=require"
}

// Ø¬Ø¯ÙˆÙ„ Ø¬Ù‡Ø§Øª Ø§Ù„Ø§ØªØµØ§Ù„
model Contact {
  id           String   @id @default(cuid())
  fullName     String   @map("full_name")
  email        String   @unique
  phone        String
  countryCode  String   @default("+20") @map("country_code")
  service      String
  budget       String
  message      String?
  createdAt    DateTime @default(now()) @map("created_at")
  updatedAt    DateTime @updatedAt @map("updated_at")

  @@map("contacts")
}

// Ø¬Ø¯ÙˆÙ„ Ø§Ù„Ù…Ø´Ø§Ø±ÙŠØ¹
model Project {
  id          String   @id @default(cuid())
  title       String
  category    String
  type        String?
  image       String?
  thumbnail   String?
  badge       String?
  liveUrl     String?  @map("live_url")
  description String?
  featured    Boolean  @default(false)
  tag         String?
  images      String[] // JSON array of image URLs
  challenge   String?
  solution    String?
  results     String[] // JSON array of results
  tools       String[] // JSON array of tools
  clientInfo  Json?    @map("client_info") // JSON object for client information
  gallery     Json?    // JSON array for gallery items
  relatedProjects Json? @map("related_projects") // JSON array for related projects
  createdAt   DateTime @default(now()) @map("created_at")
  updatedAt   DateTime @updatedAt @map("updated_at")

  // Ø§Ù„Ø¹Ù„Ø§Ù‚Ø§Øª
  testimonials Testimonial[]

  @@map("projects")
}

// Ø¬Ø¯ÙˆÙ„ Ø§Ù„Ø¹Ù…Ù„Ø§Ø¡
model Client {
  id       String  @id @default(cuid())
  name     String
  country  String?
  flag     String? @default("ğŸŒ")
  avatar   String? @default("/images/placeholder-avatar.png")
  createdAt DateTime @default(now()) @map("created_at")
  updatedAt DateTime @updatedAt @map("updated_at")

  // Ø§Ù„Ø¹Ù„Ø§Ù‚Ø§Øª
  testimonials Testimonial[]

  @@map("clients")
}

// Ø¬Ø¯ÙˆÙ„ Ø§Ù„ØªÙ‚ÙŠÙŠÙ…Ø§Øª
model Testimonial {
  id        String   @id @default(cuid())
  rating    Int      @default(5)
  text      String
  projectId String?
  category  String?  // branding, web-development, ads
  clientId  String   @map("client_id")
  createdAt DateTime @default(now()) @map("created_at")
  updatedAt DateTime @updatedAt @map("updated_at")

  // Ø§Ù„Ø¹Ù„Ø§Ù‚Ø§Øª
  client   Client   @relation(fields: [clientId], references: [id], onDelete: Cascade)
  project  Project? @relation(fields: [projectId], references: [id])

  @@map("testimonials")
}

// Ø¬Ø¯ÙˆÙ„ Ø£Ø¹Ø¶Ø§Ø¡ Ø§Ù„ÙØ±ÙŠÙ‚
model TeamMember {
  id          String   @id @default(cuid())
  name        String
  position    String
  description String
  image       String
  social      Json     // JSON object for social links
  createdAt   DateTime @default(now()) @map("created_at")
  updatedAt   DateTime @updatedAt @map("updated_at")

  @@map("team_members")
}

// Ø¬Ø¯ÙˆÙ„ Ø§Ù„Ù‚ÙŠÙ…
model Value {
  id          String   @id @default(cuid())
  icon        String
  title       String
  description String
  createdAt   DateTime @default(now()) @map("created_at")
  updatedAt   DateTime @updatedAt @map("updated_at")

  @@map("values")
}

// Ø¬Ø¯ÙˆÙ„ Ø§Ù„Ø¥Ø­ØµØ§Ø¦ÙŠØ§Øª
model Stat {
  id     String @id @default(cuid())
  number Int
  label  String
  suffix String @default("")
  createdAt DateTime @default(now()) @map("created_at")
  updatedAt DateTime @updatedAt @map("updated_at")

  @@map("stats")
}

// Ø¬Ø¯ÙˆÙ„ Ø§Ù„Ø®Ø¯Ù…Ø§Øª
model Service {
  id          String   @id @default(cuid())
  title       String
  description String
  price       String?
  category    String
  createdAt   DateTime @default(now()) @map("created_at")
  updatedAt   DateTime @updatedAt @map("updated_at")

  @@map("services")
}

// Ø¬Ø¯ÙˆÙ„ Ø§Ù„Ø¨Ø§Ù‚Ø§Øª
model Package {
  id          String   @id @default(cuid())
  category    String
  title       String
  priceMin    Float?   @map("price_min")
  priceMax    Float?   @map("price_max")
  currency    String   @default("Ø±ÙŠØ§Ù„")
  isMonthly   Boolean  @default(false) @map("is_monthly")
  description String?
  features    String[] // JSON array of features
  popular     Boolean  @default(false)
  createdAt   DateTime @default(now()) @map("created_at")
  updatedAt   DateTime @updatedAt @map("updated_at")

  @@map("packages")
}

// Ø¬Ø¯ÙˆÙ„ Ø§Ù„Ø£Ø³Ø¦Ù„Ø© Ø§Ù„Ø´Ø§Ø¦Ø¹Ø©
model FAQ {
  id          String   @id @default(cuid())
  question    String
  answer      String
  category    String
  createdAt   DateTime @default(now()) @map("created_at")
  updatedAt   DateTime @updatedAt @map("updated_at")

  @@map("faqs")
}

// Ø¬Ø¯ÙˆÙ„ Ø§Ø´ØªØ±Ø§ÙƒØ§Øª Ø§Ù„Ù†Ø´Ø±Ø© Ø§Ù„Ø¥Ø®Ø¨Ø§Ø±ÙŠØ©
model NewsletterSubscription {
  id        String   @id @default(cuid())
  email     String   @unique
  createdAt DateTime @default(now()) @map("created_at")
  updatedAt DateTime @updatedAt @map("updated_at")

  @@map("newsletter_subscriptions")
}

// Ø¬Ø¯ÙˆÙ„ Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…ÙŠÙ† (Ù„Ù„ÙˆØ­Ø© Ø§Ù„ØªØ­ÙƒÙ…)
model User {
  id        String   @id @default(cuid())
  email     String   @unique
  name      String?
  password  String
  role      String   @default("admin") // admin, editor, viewer
  isActive  Boolean  @default(true) @map("is_active")
  createdAt DateTime @default(now()) @map("created_at")
  updatedAt DateTime @updatedAt @map("updated_at")

  // Ø§Ù„Ø¹Ù„Ø§Ù‚Ø§Øª
  sessions     Session[]
  activityLogs ActivityLog[]

  @@map("users")
}

// Ø¬Ø¯ÙˆÙ„ Ø¬Ù„Ø³Ø§Øª Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…ÙŠÙ†
model Session {
  id        String   @id @default(cuid())
  userId    String   @map("user_id")
  token     String   @unique
  expiresAt DateTime @map("expires_at")
  createdAt DateTime @default(now()) @map("created_at")

  // Ø§Ù„Ø¹Ù„Ø§Ù‚Ø§Øª
  user User @relation(fields: [userId], references: [id], onDelete: Cascade)

  @@map("sessions")
}

// Ø¬Ø¯ÙˆÙ„ Ø³Ø¬Ù„ Ø§Ù„Ø£Ù†Ø´Ø·Ø© (Ù„Ù„ØªØªØ¨Ø¹)
model ActivityLog {
  id        String   @id @default(cuid())
  userId    String?  @map("user_id")
  action    String
  table     String
  recordId  String?  @map("record_id")
  oldData   Json?    @map("old_data")
  newData   Json?    @map("new_data")
  ipAddress String?  @map("ip_address")
  userAgent String?  @map("user_agent")
  createdAt DateTime @default(now()) @map("created_at")

  user   User? @relation(fields: [userId], references: [id])

  @@map("activity_logs")
}
